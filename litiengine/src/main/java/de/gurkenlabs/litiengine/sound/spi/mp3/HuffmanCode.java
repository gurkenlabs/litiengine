package de.gurkenlabs.litiengine.sound.spi.mp3;

import de.gurkenlabs.litiengine.sound.spi.BitReader;

import java.util.*;

/**
 * The code tables provided by this class are specified in the Appendix B.7 - Huffman codes for Layer III in ISO 11172-3.
 */
class HuffmanCode {
  /**
   * The deepest huffman code tree is 19 levels in the MP3 specification.
   */
  private static final int MAX_LEVEL = 19;
  private static CodeTable[] tables = new CodeTable[32];

  static {

    // Huffman code table 0
    tables[0] = new CodeTable();

    // Huffman code table 1
    tables[1] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 3, 0b001),
      new Node(1, 0, 2, 0b01),
      new Node(1, 1, 3, 0b000)
    );

    // Huffman code table 2
    tables[2] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 3, 0b010),
      new Node(0, 2, 6, 0b000001),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 3, 0b001),
      new Node(1, 2, 5, 0b00001),
      new Node(2, 0, 5, 0b00011),
      new Node(2, 1, 5, 0b00010),
      new Node(2, 2, 6, 0b000000)
    );

    // Huffman code table 3
    tables[3] = new CodeTable(
      new Node(0, 0, 2, 0b11),
      new Node(0, 1, 2, 0b10),
      new Node(0, 2, 6, 0b000001),
      new Node(1, 0, 3, 0b001),
      new Node(1, 1, 2, 0b01),
      new Node(1, 2, 5, 0b00001),
      new Node(2, 0, 5, 0b00011),
      new Node(2, 1, 5, 0b00010),
      new Node(2, 2, 6, 0b000000)
    );

    // Huffman code table 4
    tables[4] = null; // this table index is not used

    // Huffman code table 5
    tables[5] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 3, 0b010),
      new Node(0, 2, 6, 0b000110),
      new Node(0, 3, 7, 0b0000101),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 3, 0b001),
      new Node(1, 2, 6, 0b000100),
      new Node(1, 3, 7, 0b0000100),
      new Node(2, 0, 6, 0b000111),
      new Node(2, 1, 6, 0b000101),
      new Node(2, 2, 7, 0b0000111),
      new Node(2, 3, 8, 0b00000001),
      new Node(3, 0, 7, 0b0000110),
      new Node(3, 1, 6, 0b000001),
      new Node(3, 2, 7, 0b0000001),
      new Node(3, 3, 8, 0b00000000)
    );

    // Huffman code table 6
    tables[6] = new CodeTable(
      new Node(0, 0, 3, 0b111),
      new Node(0, 1, 3, 0b011),
      new Node(0, 2, 5, 0b00101),
      new Node(0, 3, 7, 0b0000001),
      new Node(1, 0, 3, 0b0110),
      new Node(1, 1, 2, 0b10),
      new Node(1, 2, 4, 0b0011),
      new Node(1, 3, 5, 0b00010),
      new Node(2, 0, 4, 0b0101),
      new Node(2, 1, 4, 0b0100),
      new Node(2, 2, 5, 0b00100),
      new Node(2, 3, 6, 0b000001),
      new Node(3, 0, 6, 0b000011),
      new Node(3, 1, 5, 0b0011),
      new Node(3, 2, 6, 0b000010),
      new Node(3, 3, 7, 0b0000000)
    );

    // Huffman code table 7
    tables[7] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 3, 0b010),
      new Node(0, 2, 6, 0b001010),
      new Node(0, 3, 8, 0b00010011),
      new Node(0, 4, 8, 0b00010000),
      new Node(0, 5, 9, 0b000001010),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 4, 0b0011),
      new Node(1, 2, 6, 0b000111),
      new Node(1, 3, 7, 0b0001010),
      new Node(1, 4, 7, 0b0000101),
      new Node(1, 5, 8, 0b00000011),
      new Node(2, 0, 6, 0b001011),
      new Node(2, 1, 5, 0b00100),
      new Node(2, 2, 7, 0b0001101),
      new Node(2, 3, 8, 0b00010001),
      new Node(2, 4, 8, 0b00001000),
      new Node(2, 5, 9, 0b000000100),
      new Node(3, 0, 7, 0b0001100),
      new Node(3, 1, 7, 0b0001011),
      new Node(3, 2, 8, 0b00010010),
      new Node(3, 3, 9, 0b000001111),
      new Node(3, 4, 9, 0b000001011),
      new Node(3, 5, 9, 0b000000010),
      new Node(4, 0, 7, 0b0000111),
      new Node(4, 1, 7, 0b0000110),
      new Node(4, 2, 8, 0b00001001),
      new Node(4, 3, 9, 0b000001110),
      new Node(4, 4, 9, 0b000000011),
      new Node(4, 5, 10, 0b0000000001),
      new Node(5, 0, 8, 0b00000110),
      new Node(5, 1, 8, 0b00000100),
      new Node(5, 2, 9, 0b000000101),
      new Node(5, 3, 10, 0b0000000011),
      new Node(5, 4, 10, 0b0000000010),
      new Node(5, 5, 10, 0b0000000000)
    );

    // Huffman code table 8
    tables[8] = new CodeTable(
      new Node(0, 0, 2, 0b11),
      new Node(0, 1, 3, 0b100),
      new Node(0, 2, 6, 0b000110),
      new Node(0, 3, 8, 0b00010010),
      new Node(0, 4, 8, 0b00001100),
      new Node(0, 5, 9, 0b000000101),
      new Node(1, 0, 3, 0b101),
      new Node(1, 1, 2, 0b01),
      new Node(1, 2, 4, 0b0010),
      new Node(1, 3, 8, 0b00010000),
      new Node(1, 4, 8, 0b00001001),
      new Node(1, 5, 8, 0b00000011),
      new Node(2, 0, 6, 0b000111),
      new Node(2, 1, 4, 0b0011),
      new Node(2, 2, 6, 0b000101),
      new Node(2, 3, 8, 0b00001110),
      new Node(2, 4, 8, 0b00000111),
      new Node(2, 5, 9, 0b000000011),
      new Node(3, 0, 8, 0b00010011),
      new Node(3, 1, 8, 0b00010001),
      new Node(3, 2, 8, 0b00001111),
      new Node(3, 3, 9, 0b000001101),
      new Node(3, 4, 9, 0b000001010),
      new Node(3, 5, 10, 0b0000000100),
      new Node(4, 0, 8, 0b00001101),
      new Node(4, 1, 7, 0b0000101),
      new Node(4, 2, 8, 0b00001000),
      new Node(4, 3, 9, 0b000001011),
      new Node(4, 4, 10, 0b0000000101),
      new Node(4, 5, 10, 0b0000000001),
      new Node(5, 0, 9, 0b000001100),
      new Node(5, 1, 8, 0b00000100),
      new Node(5, 2, 9, 0b000000100),
      new Node(5, 3, 9, 0b000000001),
      new Node(5, 4, 11, 0b00000000001),
      new Node(5, 5, 11, 0b00000000000)
    );

    // Huffman code table 9
    tables[9] = new CodeTable(
      new Node(0, 0, 3, 0b111),
      new Node(0, 1, 3, 0b101),
      new Node(0, 2, 5, 0b01001),
      new Node(0, 3, 6, 0b001110),
      new Node(0, 4, 8, 0b00001111),
      new Node(0, 5, 9, 0b000000111),
      new Node(1, 0, 3, 0b110),
      new Node(1, 1, 3, 0b100),
      new Node(1, 2, 4, 0b0101),
      new Node(1, 3, 5, 0b00101),
      new Node(1, 4, 6, 0b000110),
      new Node(1, 5, 8, 0b00000111),
      new Node(2, 0, 4, 0b0111),
      new Node(2, 1, 4, 0b0110),
      new Node(2, 2, 5, 0b01000),
      new Node(2, 3, 6, 0b001000),
      new Node(2, 4, 7, 0b0001000),
      new Node(2, 5, 8, 0b00000101),
      new Node(3, 0, 6, 0b001111),
      new Node(3, 1, 5, 0b00110),
      new Node(3, 2, 6, 0b001001),
      new Node(3, 3, 7, 0b0001010),
      new Node(3, 4, 7, 0b0000101),
      new Node(3, 5, 8, 0b00000001),
      new Node(4, 0, 7, 0b0001011),
      new Node(4, 1, 6, 0b000111),
      new Node(4, 2, 7, 0b0001001),
      new Node(4, 3, 7, 0b0000110),
      new Node(4, 4, 8, 0b00000100),
      new Node(4, 5, 9, 0b000000001),
      new Node(5, 0, 9, 0b000001100),
      new Node(5, 1, 7, 0b0000100),
      new Node(5, 2, 8, 0b00000110),
      new Node(5, 3, 8, 0b00000010),
      new Node(5, 4, 9, 0b000000110),
      new Node(5, 5, 9, 0b000000000)
    );

    // Huffman code table 10
    tables[10] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 3, 0b010),
      new Node(0, 2, 6, 0b001010),
      new Node(0, 3, 8, 0b00010111),
      new Node(0, 4, 9, 0b000100011),
      new Node(0, 5, 9, 0b000011110),
      new Node(0, 6, 9, 0b000001100),
      new Node(0, 7, 10, 0b0000010001),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 4, 0b0011),
      new Node(1, 2, 6, 0b001000),
      new Node(1, 3, 7, 0b0001100),
      new Node(1, 4, 8, 0b00010010),
      new Node(1, 5, 9, 0b000010101),
      new Node(1, 6, 8, 0b00001100),
      new Node(1, 7, 8, 0b00000111),
      new Node(2, 0, 6, 0b001011),
      new Node(2, 1, 6, 0b001001),
      new Node(2, 2, 7, 0b0001111),
      new Node(2, 3, 8, 0b00010101),
      new Node(2, 4, 9, 0b000100000),
      new Node(2, 5, 10, 0b0000101000),
      new Node(2, 6, 9, 0b000010011),
      new Node(2, 7, 9, 0b000000110),
      new Node(3, 0, 7, 0b0001110),
      new Node(3, 1, 7, 0b0001101),
      new Node(3, 2, 8, 0b00010110),
      new Node(3, 3, 9, 0b000100010),
      new Node(3, 4, 10, 0b0000101110),
      new Node(3, 5, 10, 0b0000010111),
      new Node(3, 6, 9, 0b000010010),
      new Node(3, 7, 10, 0b0000000111),
      new Node(4, 0, 8, 0b00010100),
      new Node(4, 1, 8, 0b00010011),
      new Node(4, 2, 9, 0b000100001),
      new Node(4, 3, 10, 0b0000101111),
      new Node(4, 4, 10, 0b0000011011),
      new Node(4, 5, 10, 0b0000010110),
      new Node(4, 6, 10, 0b0000001001),
      new Node(4, 7, 10, 0b0000000011),
      new Node(5, 0, 9, 0b000011111),
      new Node(5, 1, 9, 0b000010110),
      new Node(5, 2, 10, 0b0000101001),
      new Node(5, 3, 10, 0b0000011010),
      new Node(5, 4, 11, 0b00000010101),
      new Node(5, 5, 11, 0b00000010100),
      new Node(5, 6, 10, 0b0000000101),
      new Node(5, 7, 11, 0b00000000011),
      new Node(6, 0, 8, 0b00001110),
      new Node(6, 1, 8, 0b00001101),
      new Node(6, 2, 9, 0b000001010),
      new Node(6, 3, 10, 0b0000001011),
      new Node(6, 4, 10, 0b0000010000),
      new Node(6, 5, 10, 0b0000000110),
      new Node(6, 6, 11, 0b00000000101),
      new Node(6, 7, 11, 0b00000000001),
      new Node(7, 0, 9, 0b000001001),
      new Node(7, 1, 8, 0b00001000),
      new Node(7, 2, 9, 0b000000111),
      new Node(7, 3, 10, 0b0000001000),
      new Node(7, 4, 10, 0b0000000100),
      new Node(7, 5, 11, 0b00000000100),
      new Node(7, 6, 11, 0b00000000010),
      new Node(7, 7, 11, 0b00000000000)
    );

    // Huffman code table 11
    tables[11] = new CodeTable(
      new Node(0, 0, 2, 0b11),
      new Node(0, 1, 3, 0b0100),
      new Node(0, 2, 5, 0b01010),
      new Node(0, 3, 7, 0b0011000),
      new Node(0, 4, 8, 0b00100010),
      new Node(0, 5, 9, 0b000100001),
      new Node(0, 6, 8, 0b00010101),
      new Node(0, 7, 9, 0b000001111),
      new Node(1, 0, 3, 0b101),
      new Node(1, 1, 3, 0b011),
      new Node(1, 2, 4, 0b0100),
      new Node(1, 3, 6, 0b001010),
      new Node(1, 4, 8, 0b00100000),
      new Node(1, 5, 8, 0b00010001),
      new Node(1, 6, 7, 0b0001011),
      new Node(1, 7, 8, 0b00001010),
      new Node(2, 0, 5, 0b01011),
      new Node(2, 1, 5, 0b00111),
      new Node(2, 2, 6, 0b001101),
      new Node(2, 3, 7, 0b0010010),
      new Node(2, 4, 8, 0b00011110),
      new Node(2, 5, 9, 0b000011111),
      new Node(2, 6, 8, 0b00010100),
      new Node(2, 7, 8, 0b00000101),
      new Node(3, 0, 7, 0b0011001),
      new Node(3, 1, 6, 0b001011),
      new Node(3, 2, 7, 0b0010011),
      new Node(3, 3, 9, 0b000111011),
      new Node(3, 4, 8, 0b00011011),
      new Node(3, 5, 10, 0b0000010010),
      new Node(3, 6, 8, 0b00001100),
      new Node(3, 7, 9, 0b000000101),
      new Node(4, 0, 8, 0b00100011),
      new Node(4, 1, 8, 0b00100001),
      new Node(4, 2, 8, 0b00011111),
      new Node(4, 3, 9, 0b000111010),
      new Node(4, 4, 9, 0b000011110),
      new Node(4, 5, 10, 0b0000010000),
      new Node(4, 6, 9, 0b000000111),
      new Node(4, 7, 10, 0b0000000101),
      new Node(5, 0, 8, 0b00011100),
      new Node(5, 1, 8, 0b00011010),
      new Node(5, 2, 9, 0b000100000),
      new Node(5, 3, 10, 0b0000010011),
      new Node(5, 4, 10, 0b0000010001),
      new Node(5, 5, 11, 0b00000001111),
      new Node(5, 6, 10, 0b0000001000),
      new Node(5, 7, 11, 0b00000001110),
      new Node(6, 0, 8, 0b00001110),
      new Node(6, 1, 7, 0b0001100),
      new Node(6, 2, 7, 0b0001001),
      new Node(6, 3, 8, 0b00001101),
      new Node(6, 4, 9, 0b000001110),
      new Node(6, 5, 10, 0b0000001001),
      new Node(6, 6, 10, 0b0000000100),
      new Node(6, 7, 10, 0b0000000001),
      new Node(7, 0, 8, 0b00001011),
      new Node(7, 1, 7, 0b0000100),
      new Node(7, 2, 8, 0b00000110),
      new Node(7, 3, 9, 0b000000110),
      new Node(7, 4, 10, 0b0000000110),
      new Node(7, 5, 10, 0b0000000011),
      new Node(7, 6, 10, 0b0000000010),
      new Node(7, 7, 10, 0b0000000000)
    );

    // Huffman code table 12
    tables[12] = new CodeTable(
      new Node(0, 0, 4, 0b1001),
      new Node(0, 1, 3, 0b110),
      new Node(0, 2, 5, 0b10000),
      new Node(0, 3, 7, 0b0100001),
      new Node(0, 4, 8, 0b00101001),
      new Node(0, 5, 9, 0b000100111),
      new Node(0, 6, 9, 0b000100110),
      new Node(0, 7, 9, 0b000011010),
      new Node(1, 0, 3, 0b111),
      new Node(1, 1, 3, 0b101),
      new Node(1, 2, 4, 0b0110),
      new Node(1, 3, 5, 0b01001),
      new Node(1, 4, 7, 0b0010111),
      new Node(1, 5, 7, 0b0010000),
      new Node(1, 6, 8, 0b00011010),
      new Node(1, 7, 8, 0b00001011),
      new Node(2, 0, 5, 0b10001),
      new Node(2, 1, 4, 0b0111),
      new Node(2, 2, 5, 0b01011),
      new Node(2, 3, 6, 0b001110),
      new Node(2, 4, 7, 0b0010101),
      new Node(2, 5, 8, 0b00011110),
      new Node(2, 6, 7, 0b0001010),
      new Node(2, 7, 8, 0b00000111),
      new Node(3, 0, 6, 0b010001),
      new Node(3, 1, 5, 0b01010),
      new Node(3, 2, 6, 0b001111),
      new Node(3, 3, 6, 0b001100),
      new Node(3, 4, 7, 0b0010010),
      new Node(3, 5, 8, 0b00011100),
      new Node(3, 6, 8, 0b00001110),
      new Node(3, 7, 8, 0b00000101),
      new Node(4, 0, 7, 0b0100000),
      new Node(4, 1, 6, 0b001101),
      new Node(4, 2, 7, 0b0010110),
      new Node(4, 3, 7, 0b0010011),
      new Node(4, 4, 8, 0b00010010),
      new Node(4, 5, 8, 0b00010000),
      new Node(4, 6, 8, 0b00001001),
      new Node(4, 7, 9, 0b000000101),
      new Node(5, 0, 8, 0b00101000),
      new Node(5, 1, 7, 0b0010001),
      new Node(5, 2, 8, 0b00011111),
      new Node(5, 3, 8, 0b00011101),
      new Node(5, 4, 8, 0b00010001),
      new Node(5, 5, 9, 0b000001101),
      new Node(5, 6, 8, 0b00000100),
      new Node(5, 7, 9, 0b000000010),
      new Node(6, 0, 8, 0b00011011),
      new Node(6, 1, 7, 0b0001100),
      new Node(6, 2, 7, 0b0001011),
      new Node(6, 3, 8, 0b00001111),
      new Node(6, 4, 8, 0b00001010),
      new Node(6, 5, 9, 0b000000111),
      new Node(6, 6, 9, 0b000000100),
      new Node(6, 7, 10, 0b0000000001),
      new Node(7, 0, 9, 0b000011011),
      new Node(7, 1, 8, 0b00001100),
      new Node(7, 2, 8, 0b00001000),
      new Node(7, 3, 9, 0b000001100),
      new Node(7, 4, 9, 0b000000110),
      new Node(7, 5, 9, 0b000000011),
      new Node(7, 6, 9, 0b000000001),
      new Node(7, 7, 10, 0b0000000000)
    );

    // Huffman code table 13
    tables[13] = new CodeTable(
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 4, 0b0101),
      new Node(0, 2, 6, 0b001110),
      new Node(0, 3, 7, 0b0010101),
      new Node(0, 4, 8, 0b00100010),
      new Node(0, 5, 9, 0b000110011),
      new Node(0, 6, 9, 0b000101110),
      new Node(0, 7, 10, 0b0001000111),
      new Node(0, 8, 9, 0b000101010),
      new Node(0, 9, 10, 0b0000110100),
      new Node(0, 10, 11, 0b00001000100),
      new Node(0, 11, 11, 0b00000110100),
      new Node(0, 12, 12, 0b000001000011),
      new Node(0, 13, 12, 0b000000101100),
      new Node(0, 14, 13, 0b0000000101011),
      new Node(0, 15, 13, 0b0000000010011),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 4, 0b0100),
      new Node(1, 2, 6, 0b001100),
      new Node(1, 3, 7, 0b0010011),
      new Node(1, 4, 8, 0b00011111),
      new Node(1, 5, 8, 0b00011010),
      new Node(1, 6, 9, 0b000101100),
      new Node(1, 7, 9, 0b000100001),
      new Node(1, 8, 9, 0b000011111),
      new Node(1, 9, 9, 0b000011000),
      new Node(1, 10, 10, 0b0000100000),
      new Node(1, 11, 10, 0b0000011000),
      new Node(1, 12, 11, 0b00000011111),
      new Node(1, 13, 12, 0b000000100011),
      new Node(1, 14, 12, 0b000000010110),
      new Node(1, 15, 12, 0b000000001110),
      new Node(2, 0, 6, 0b001111),
      new Node(2, 1, 6, 0b001101),
      new Node(2, 2, 7, 0b0010111),
      new Node(2, 3, 8, 0b00100100),
      new Node(2, 4, 9, 0b000111011),
      new Node(2, 5, 9, 0b000110001),
      new Node(2, 6, 10, 0b0001001101),
      new Node(2, 7, 10, 0b0001000001),
      new Node(2, 8, 9, 0b000011101),
      new Node(2, 9, 10, 0b0000101000),
      new Node(2, 10, 10, 0b0000011110),
      new Node(2, 11, 11, 0b00000101000),
      new Node(2, 12, 11, 0b00000011011),
      new Node(2, 13, 12, 0b000000100001),
      new Node(2, 14, 13, 0b0000000101010),
      new Node(2, 15, 13, 0b0000000010000),
      new Node(3, 0, 7, 0b0010110),
      new Node(3, 1, 7, 0b0010100),
      new Node(3, 2, 8, 0b00100101),
      new Node(3, 3, 9, 0b000111101),
      new Node(3, 4, 9, 0b000111000),
      new Node(3, 5, 10, 0b0001001111),
      new Node(3, 6, 10, 0b0001001001),
      new Node(3, 7, 10, 0b0001000000),
      new Node(3, 8, 10, 0b0000101011),
      new Node(3, 9, 11, 0b00001001100),
      new Node(3, 10, 11, 0b00000111000),
      new Node(3, 11, 11, 0b00000100101),
      new Node(3, 12, 11, 0b00000011010),
      new Node(3, 13, 12, 0b000000011111),
      new Node(3, 14, 13, 0b0000000011001),
      new Node(3, 15, 13, 0b0000000001110),
      new Node(4, 0, 8, 0b00100011),
      new Node(4, 1, 7, 0b0010000),
      new Node(4, 2, 9, 0b000111100),
      new Node(4, 3, 9, 0b000111001),
      new Node(4, 4, 10, 0b0001100001),
      new Node(4, 5, 10, 0b0001001011),
      new Node(4, 6, 11, 0b00001110010),
      new Node(4, 7, 11, 0b00001011011),
      new Node(4, 8, 10, 0b0000110110),
      new Node(4, 9, 11, 0b00001001001),
      new Node(4, 10, 11, 0b00000110111),
      new Node(4, 11, 12, 0b000000101001),
      new Node(4, 12, 12, 0b000000110000),
      new Node(4, 13, 13, 0b0000000110101),
      new Node(4, 14, 13, 0b0000000010111),
      new Node(4, 15, 14, 0b00000000011000),
      new Node(5, 0, 9, 0b000111010),
      new Node(5, 1, 8, 0b00011011),
      new Node(5, 2, 9, 0b000110010),
      new Node(5, 3, 10, 0b0001100000),
      new Node(5, 4, 10, 0b0001001100),
      new Node(5, 5, 10, 0b0001000110),
      new Node(5, 6, 11, 0b00001011101),
      new Node(5, 7, 11, 0b00001010100),
      new Node(5, 8, 11, 0b00001001101),
      new Node(5, 9, 11, 0b00000111010),
      new Node(5, 10, 12, 0b000001001111),
      new Node(5, 11, 11, 0b00000011101),
      new Node(5, 12, 13, 0b0000001001010),
      new Node(5, 13, 13, 0b0000000110001),
      new Node(5, 14, 14, 0b00000000101001),
      new Node(5, 15, 14, 0b00000000010001),
      new Node(6, 0, 9, 0b000101111),
      new Node(6, 1, 9, 0b000101101),
      new Node(6, 2, 10, 0b0001001110),
      new Node(6, 3, 10, 0b0001001010),
      new Node(6, 4, 11, 0b00001110011),
      new Node(6, 5, 11, 0b00001011110),
      new Node(6, 6, 11, 0b00001011010),
      new Node(6, 7, 11, 0b00001001111),
      new Node(6, 8, 11, 0b00001000101),
      new Node(6, 9, 12, 0b000001010011),
      new Node(6, 10, 12, 0b000001000111),
      new Node(6, 11, 12, 0b000000110010),
      new Node(6, 12, 13, 0b0000000111011),
      new Node(6, 13, 13, 0b0000000100110),
      new Node(6, 14, 14, 0b00000000100100),
      new Node(6, 15, 14, 0b00000000001111),
      new Node(7, 0, 10, 0b0001001000),
      new Node(7, 1, 9, 0b000100010),
      new Node(7, 2, 10, 0b0000111000),
      new Node(7, 3, 11, 0b00001011111),
      new Node(7, 4, 11, 0b00001011100),
      new Node(7, 5, 11, 0b00001010101),
      new Node(7, 6, 12, 0b000001011011),
      new Node(7, 7, 12, 0b000001011010),
      new Node(7, 8, 12, 0b000001010110),
      new Node(7, 9, 12, 0b000001001001),
      new Node(7, 10, 13, 0b0000001001101),
      new Node(7, 11, 13, 0b0000001000001),
      new Node(7, 12, 13, 0b0000000110011),
      new Node(7, 13, 14, 0b00000000101100),
      new Node(7, 14, 16, 0b0000000000101011),
      new Node(7, 15, 16, 0b0000000000101010),
      new Node(8, 0, 9, 0b000101011),
      new Node(8, 1, 8, 0b00010100),
      new Node(8, 2, 9, 0b000011110),
      new Node(8, 3, 10, 0b0000101100),
      new Node(8, 4, 10, 0b0000110111),
      new Node(8, 5, 11, 0b00001001110),
      new Node(8, 6, 11, 0b00001001000),
      new Node(8, 7, 12, 0b000001010111),
      new Node(8, 8, 12, 0b000001001110),
      new Node(8, 9, 12, 0b000000111101),
      new Node(8, 10, 12, 0b000000101110),
      new Node(8, 11, 13, 0b0000000110110),
      new Node(8, 12, 13, 0b0000000100101),
      new Node(8, 13, 14, 0b00000000011110),
      new Node(8, 14, 15, 0b000000000010100),
      new Node(8, 15, 15, 0b000000000010000),
      new Node(9, 0, 10, 0b0000110101),
      new Node(9, 1, 9, 0b000011001),
      new Node(9, 2, 10, 0b0000101001),
      new Node(9, 3, 10, 0b0000100101),
      new Node(9, 4, 11, 0b00000101100),
      new Node(9, 5, 11, 0b00000111011),
      new Node(9, 6, 11, 0b00000110110),
      new Node(9, 7, 13, 0b0000001010001),
      new Node(9, 8, 12, 0b000001000010),
      new Node(9, 9, 13, 0b0000001001100),
      new Node(9, 10, 13, 0b0000000111001),
      new Node(9, 11, 14, 0b00000000110110),
      new Node(9, 12, 14, 0b00000000100101),
      new Node(9, 13, 14, 0b00000000010010),
      new Node(9, 14, 16, 0b0000000000100111),
      new Node(9, 15, 15, 0b000000000001011),
      new Node(10, 0, 10, 0b0000100011),
      new Node(10, 1, 10, 0b0000100001),
      new Node(10, 2, 10, 0b0000011111),
      new Node(10, 3, 11, 0b00000111001),
      new Node(10, 4, 11, 0b00000101010),
      new Node(10, 5, 12, 0b000001010010),
      new Node(10, 6, 12, 0b000001001000),
      new Node(10, 7, 13, 0b0000001010000),
      new Node(10, 8, 12, 0b000000101111),
      new Node(10, 9, 13, 0b0000000111010),
      new Node(10, 10, 14, 0b00000000110111),
      new Node(10, 11, 13, 0b0000000010101),
      new Node(10, 12, 14, 0b00000000010110),
      new Node(10, 13, 15, 0b000000000011010),
      new Node(10, 14, 16, 0b0000000000100110),
      new Node(10, 15, 17, 0b00000000000010110),
      new Node(11, 0, 11, 0b00000110101),
      new Node(11, 1, 10, 0b0000011001),
      new Node(11, 2, 10, 0b0000010111),
      new Node(11, 3, 11, 0b00000100110),
      new Node(11, 4, 12, 0b000001000110),
      new Node(11, 5, 12, 0b000000111100),
      new Node(11, 6, 12, 0b000000110011),
      new Node(11, 7, 12, 0b000000100100),
      new Node(11, 8, 13, 0b0000000110111),
      new Node(11, 9, 13, 0b0000000011010),
      new Node(11, 10, 13, 0b0000000100010),
      new Node(11, 11, 14, 0b00000000010111),
      new Node(11, 12, 15, 0b000000000011011),
      new Node(11, 13, 15, 0b000000000001110),
      new Node(11, 14, 15, 0b000000000001001),
      new Node(11, 15, 16, 0b0000000000000111),
      new Node(12, 0, 11, 0b00000100010),
      new Node(12, 1, 11, 0b00000100000),
      new Node(12, 2, 11, 0b00000011100),
      new Node(12, 3, 12, 0b000000100111),
      new Node(12, 4, 12, 0b000000110001),
      new Node(12, 5, 13, 0b0000001001011),
      new Node(12, 6, 12, 0b000000011110),
      new Node(12, 7, 13, 0b0000000110100),
      new Node(12, 8, 14, 0b00000000110000),
      new Node(12, 9, 14, 0b00000000101000),
      new Node(12, 10, 15, 0b000000000110100),
      new Node(12, 11, 15, 0b000000000011100),
      new Node(12, 12, 15, 0b000000000010010),
      new Node(12, 13, 16, 0b0000000000010001),
      new Node(12, 14, 16, 0b0000000000001001),
      new Node(12, 15, 16, 0b0000000000000101),
      new Node(13, 0, 12, 0b000000101101),
      new Node(13, 1, 11, 0b00000010101),
      new Node(13, 2, 12, 0b000000100010),
      new Node(13, 3, 13, 0b0000001000000),
      new Node(13, 4, 13, 0b0000000111000),
      new Node(13, 5, 13, 0b0000000110010),
      new Node(13, 6, 14, 0b00000000110001),
      new Node(13, 7, 14, 0b00000000101101),
      new Node(13, 8, 14, 0b00000000011111),
      new Node(13, 9, 14, 0b00000000010011),
      new Node(13, 10, 14, 0b00000000001100),
      new Node(13, 11, 15, 0b000000000001111),
      new Node(13, 12, 16, 0b0000000000001010),
      new Node(13, 13, 15, 0b000000000000111),
      new Node(13, 14, 16, 0b0000000000000110),
      new Node(13, 15, 16, 0b0000000000000011),
      new Node(14, 0, 13, 0b0000000110000),
      new Node(14, 1, 12, 0b000000010111),
      new Node(14, 2, 12, 0b000000010100),
      new Node(14, 3, 13, 0b0000000100111),
      new Node(14, 4, 13, 0b0000000100100),
      new Node(14, 5, 13, 0b0000000100011),
      new Node(14, 6, 15, 0b000000000110101),
      new Node(14, 7, 14, 0b00000000010101),
      new Node(14, 8, 14, 0b00000000010000),
      new Node(14, 9, 17, 0b00000000000010111),
      new Node(14, 10, 15, 0b000000000001101),
      new Node(14, 11, 15, 0b000000000001010),
      new Node(14, 12, 15, 0b000000000000110),
      new Node(14, 13, 17, 0b00000000000000001),
      new Node(14, 14, 16, 0b0000000000000100),
      new Node(14, 15, 16, 0b0000000000000010),
      new Node(15, 0, 12, 0b000000010000),
      new Node(15, 1, 12, 0b000000001111),
      new Node(15, 2, 13, 0b0000000010001),
      new Node(15, 3, 14, 0b00000000011011),
      new Node(15, 4, 14, 0b00000000011001),
      new Node(15, 5, 14, 0b00000000010100),
      new Node(15, 6, 15, 0b000000000011101),
      new Node(15, 7, 14, 0b00000000001011),
      new Node(15, 8, 15, 0b000000000010001),
      new Node(15, 9, 15, 0b000000000001100),
      new Node(15, 10, 16, 0b0000000000010000),
      new Node(15, 11, 16, 0b0000000000001000),
      new Node(15, 12, 19, 0b0000000000000000001),
      new Node(15, 13, 18, 0b000000000000000001),
      new Node(15, 14, 19, 0b0000000000000000000),
      new Node(15, 15, 16, 0b0000000000000001)
    );

    // Huffman code table 14
    tables[14] = null; // this table index is not used

    // Huffman code table 15
    tables[15] = new CodeTable(
      new Node(0, 0, 3, 0b111),
      new Node(0, 1, 4, 0b1100),
      new Node(0, 2, 5, 0b10010),
      new Node(0, 3, 7, 0b0110101),
      new Node(0, 4, 7, 0b0101111),
      new Node(0, 5, 8, 0b01001100),
      new Node(0, 6, 9, 0b001111100),
      new Node(0, 7, 9, 0b001101100),
      new Node(0, 8, 9, 0b001011001),
      new Node(0, 9, 10, 0b0001111011),
      new Node(0, 10, 10, 0b0001101100),
      new Node(0, 11, 11, 0b00001110111),
      new Node(0, 12, 11, 0b00001101011),
      new Node(0, 13, 11, 0b00001010001),
      new Node(0, 14, 12, 0b000001111010),
      new Node(0, 15, 13, 0b0000000111111),
      new Node(1, 0, 4, 0b1101),
      new Node(1, 1, 3, 0b101),
      new Node(1, 2, 5, 0b10000),
      new Node(1, 3, 6, 0b011011),
      new Node(1, 4, 7, 0b0101110),
      new Node(1, 5, 7, 0b0100100),
      new Node(1, 6, 8, 0b00111101),
      new Node(1, 7, 8, 0b00110011),
      new Node(1, 8, 8, 0b00101010),
      new Node(1, 9, 9, 0b001000110),
      new Node(1, 10, 9, 0b000110100),
      new Node(1, 11, 10, 0b0001010011),
      new Node(1, 12, 10, 0b0001000001),
      new Node(1, 13, 10, 0b0000101001),
      new Node(1, 14, 11, 0b00000111011),
      new Node(1, 15, 11, 0b00000100100),
      new Node(2, 0, 5, 0b10011),
      new Node(2, 1, 5, 0b10001),
      new Node(2, 2, 5, 0b01111),
      new Node(2, 3, 6, 0b011000),
      new Node(2, 4, 7, 0b0101001),
      new Node(2, 5, 7, 0b0100010),
      new Node(2, 6, 8, 0b00111011),
      new Node(2, 7, 8, 0b00110000),
      new Node(2, 8, 8, 0b00101000),
      new Node(2, 9, 9, 0b001000000),
      new Node(2, 10, 9, 0b000110010),
      new Node(2, 11, 10, 0b0001001110),
      new Node(2, 12, 10, 0b0000111110),
      new Node(2, 13, 11, 0b00001010000),
      new Node(2, 14, 11, 0b00000111000),
      new Node(2, 15, 11, 0b00000100001),
      new Node(3, 0, 6, 0b011101),
      new Node(3, 1, 6, 0b011100),
      new Node(3, 2, 6, 0b011001),
      new Node(3, 3, 7, 0b0101011),
      new Node(3, 4, 7, 0b0100111),
      new Node(3, 5, 8, 0b00111111),
      new Node(3, 6, 8, 0b00110111),
      new Node(3, 7, 9, 0b001011101),
      new Node(3, 8, 9, 0b001001100),
      new Node(3, 9, 9, 0b000111011),
      new Node(3, 10, 10, 0b0001011101),
      new Node(3, 11, 10, 0b0001001000),
      new Node(3, 12, 10, 0b0000110110),
      new Node(3, 13, 11, 0b00001001011),
      new Node(3, 14, 11, 0b00000110010),
      new Node(3, 15, 11, 0b00000011101),
      new Node(4, 0, 7, 0b0110100),
      new Node(4, 1, 6, 0b010110),
      new Node(4, 2, 7, 0b0101010),
      new Node(4, 3, 7, 0b0101000),
      new Node(4, 4, 8, 0b01000011),
      new Node(4, 5, 8, 0b00111001),
      new Node(4, 6, 9, 0b001011111),
      new Node(4, 7, 9, 0b001001111),
      new Node(4, 8, 9, 0b001001000),
      new Node(4, 9, 9, 0b000111001),
      new Node(4, 10, 10, 0b0001011001),
      new Node(4, 11, 10, 0b0001000101),
      new Node(4, 12, 10, 0b0000110001),
      new Node(4, 13, 11, 0b00001000010),
      new Node(4, 14, 11, 0b00000101110),
      new Node(4, 15, 11, 0b00000011011),
      new Node(5, 0, 8, 0b01001101),
      new Node(5, 1, 7, 0b0100101),
      new Node(5, 2, 7, 0b0100011),
      new Node(5, 3, 8, 0b01000010),
      new Node(5, 4, 8, 0b00111010),
      new Node(5, 5, 8, 0b00110100),
      new Node(5, 6, 9, 0b001011011),
      new Node(5, 7, 9, 0b001001010),
      new Node(5, 8, 9, 0b000111110),
      new Node(5, 9, 9, 0b000110000),
      new Node(5, 10, 10, 0b0001001111),
      new Node(5, 11, 10, 0b0000111111),
      new Node(5, 12, 11, 0b00001011010),
      new Node(5, 13, 11, 0b00000111110),
      new Node(5, 14, 11, 0b00000101000),
      new Node(5, 15, 12, 0b000000100110),
      new Node(6, 0, 9, 0b001111101),
      new Node(6, 1, 7, 0b0100000),
      new Node(6, 2, 8, 0b00111100),
      new Node(6, 3, 8, 0b00111000),
      new Node(6, 4, 8, 0b00110010),
      new Node(6, 5, 9, 0b001011100),
      new Node(6, 6, 9, 0b001001110),
      new Node(6, 7, 9, 0b001000001),
      new Node(6, 8, 9, 0b000110111),
      new Node(6, 9, 10, 0b0001010111),
      new Node(6, 10, 10, 0b0001000111),
      new Node(6, 11, 10, 0b0000110011),
      new Node(6, 12, 11, 0b00001001001),
      new Node(6, 13, 11, 0b00000110011),
      new Node(6, 14, 12, 0b000001000110),
      new Node(6, 15, 12, 0b000000011110),
      new Node(7, 0, 9, 0b001101101),
      new Node(7, 1, 8, 0b00110101),
      new Node(7, 2, 8, 0b00110001),
      new Node(7, 3, 9, 0b001011110),
      new Node(7, 4, 9, 0b001011000),
      new Node(7, 5, 9, 0b001001011),
      new Node(7, 6, 9, 0b001000010),
      new Node(7, 7, 10, 0b0001111010),
      new Node(7, 8, 10, 0b0001011011),
      new Node(7, 9, 10, 0b0001001001),
      new Node(7, 10, 10, 0b0000111000),
      new Node(7, 11, 10, 0b0000101010),
      new Node(7, 12, 11, 0b00001000000),
      new Node(7, 13, 11, 0b00000101100),
      new Node(7, 14, 11, 0b00000010101),
      new Node(7, 15, 12, 0b000000011001),
      new Node(8, 0, 9, 0b001011010),
      new Node(8, 1, 8, 0b00101011),
      new Node(8, 2, 8, 0b00101001),
      new Node(8, 3, 9, 0b001001101),
      new Node(8, 4, 9, 0b001001001),
      new Node(8, 5, 9, 0b000111111),
      new Node(8, 6, 9, 0b000111000),
      new Node(8, 7, 10, 0b0001011100),
      new Node(8, 8, 10, 0b0001001101),
      new Node(8, 9, 10, 0b0001000010),
      new Node(8, 10, 10, 0b0000101111),
      new Node(8, 11, 11, 0b00001000011),
      new Node(8, 12, 11, 0b00000110000),
      new Node(8, 13, 12, 0b000000110101),
      new Node(8, 14, 12, 0b000000100100),
      new Node(8, 15, 12, 0b000000010100),
      new Node(9, 0, 9, 0b001000111),
      new Node(9, 1, 8, 0b00100010),
      new Node(9, 2, 9, 0b001000011),
      new Node(9, 3, 9, 0b000111100),
      new Node(9, 4, 9, 0b000111010),
      new Node(9, 5, 9, 0b000110001),
      new Node(9, 6, 10, 0b0001011000),
      new Node(9, 7, 10, 0b0001001100),
      new Node(9, 8, 10, 0b0001000011),
      new Node(9, 9, 11, 0b00001101010),
      new Node(9, 10, 11, 0b00001000111),
      new Node(9, 11, 11, 0b00000110110),
      new Node(9, 12, 11, 0b00000100110),
      new Node(9, 13, 12, 0b000000100111),
      new Node(9, 14, 12, 0b000000010111),
      new Node(9, 15, 12, 0b000000001111),
      new Node(10, 0, 10, 0b0001101101),
      new Node(10, 1, 9, 0b000110101),
      new Node(10, 2, 9, 0b000110011),
      new Node(10, 3, 9, 0b000101111),
      new Node(10, 4, 10, 0b0001011010),
      new Node(10, 5, 10, 0b0001010010),
      new Node(10, 6, 10, 0b0000111010),
      new Node(10, 7, 10, 0b0000111001),
      new Node(10, 8, 10, 0b0000110000),
      new Node(10, 9, 11, 0b00001001000),
      new Node(10, 10, 11, 0b00000111001),
      new Node(10, 11, 11, 0b00000101001),
      new Node(10, 12, 11, 0b00000010111),
      new Node(10, 13, 12, 0b000000011011),
      new Node(10, 14, 13, 0b0000000111110),
      new Node(10, 15, 12, 0b000000001001),
      new Node(11, 0, 10, 0b0001010110),
      new Node(11, 1, 9, 0b000101010),
      new Node(11, 2, 9, 0b000101000),
      new Node(11, 3, 9, 0b000100101),
      new Node(11, 4, 10, 0b0001000110),
      new Node(11, 5, 10, 0b0001000000),
      new Node(11, 6, 10, 0b0000110100),
      new Node(11, 7, 10, 0b0000101011),
      new Node(11, 8, 11, 0b00001000110),
      new Node(11, 9, 11, 0b00000110111),
      new Node(11, 10, 11, 0b00000101010),
      new Node(11, 11, 11, 0b00000011001),
      new Node(11, 12, 12, 0b000000011101),
      new Node(11, 13, 12, 0b000000010010),
      new Node(11, 14, 12, 0b000000001011),
      new Node(11, 15, 13, 0b0000000001011),
      new Node(12, 0, 11, 0b00001110110),
      new Node(12, 1, 10, 0b0001000100),
      new Node(12, 2, 9, 0b000011110),
      new Node(12, 3, 10, 0b0000110111),
      new Node(12, 4, 10, 0b0000110010),
      new Node(12, 5, 10, 0b0000101110),
      new Node(12, 6, 11, 0b00001001010),
      new Node(12, 7, 11, 0b00001000001),
      new Node(12, 8, 11, 0b00000110001),
      new Node(12, 9, 11, 0b00000100111),
      new Node(12, 10, 11, 0b00000011000),
      new Node(12, 11, 11, 0b00000010000),
      new Node(12, 12, 12, 0b000000010110),
      new Node(12, 13, 12, 0b000000001101),
      new Node(12, 14, 13, 0b0000000001110),
      new Node(12, 15, 13, 0b0000000000111),
      new Node(13, 0, 11, 0b00001011011),
      new Node(13, 1, 10, 0b0000101100),
      new Node(13, 2, 10, 0b0000100111),
      new Node(13, 3, 10, 0b0000100110),
      new Node(13, 4, 10, 0b0000100010),
      new Node(13, 5, 11, 0b00000111111),
      new Node(13, 6, 11, 0b00000110100),
      new Node(13, 7, 11, 0b00000101101),
      new Node(13, 8, 11, 0b00000011111),
      new Node(13, 9, 12, 0b000000110100),
      new Node(13, 10, 12, 0b000000011100),
      new Node(13, 11, 12, 0b000000010011),
      new Node(13, 12, 12, 0b000000001110),
      new Node(13, 13, 12, 0b000000001000),
      new Node(13, 14, 13, 0b0000000001001),
      new Node(13, 15, 13, 0b0000000000011),
      new Node(14, 0, 12, 0b000001111011),
      new Node(14, 1, 11, 0b00000111100),
      new Node(14, 2, 11, 0b00000111010),
      new Node(14, 3, 11, 0b00000110101),
      new Node(14, 4, 11, 0b00000101111),
      new Node(14, 5, 11, 0b00000101011),
      new Node(14, 6, 11, 0b00000100000),
      new Node(14, 7, 11, 0b00000010110),
      new Node(14, 8, 12, 0b000000100101),
      new Node(14, 9, 12, 0b000000011000),
      new Node(14, 10, 12, 0b000000010001),
      new Node(14, 11, 12, 0b000000001100),
      new Node(14, 12, 13, 0b0000000001111),
      new Node(14, 13, 13, 0b0000000001010),
      new Node(14, 14, 12, 0b000000000010),
      new Node(14, 15, 13, 0b0000000000001),
      new Node(15, 0, 12, 0b000001000111),
      new Node(15, 1, 11, 0b00000100101),
      new Node(15, 2, 11, 0b00000100010),
      new Node(15, 3, 11, 0b00000011110),
      new Node(15, 4, 11, 0b00000011100),
      new Node(15, 5, 11, 0b00000010100),
      new Node(15, 6, 11, 0b00000010001),
      new Node(15, 7, 12, 0b000000011010),
      new Node(15, 8, 12, 0b000000010101),
      new Node(15, 9, 12, 0b000000010000),
      new Node(15, 10, 12, 0b000000001010),
      new Node(15, 11, 12, 0b000000000110),
      new Node(15, 12, 13, 0b0000000001000),
      new Node(15, 13, 13, 0b0000000000110),
      new Node(15, 14, 13, 0b0000000000010),
      new Node(15, 15, 13, 0b0000000000000)
    );

    // data for Huffman code tables 16-23
    var codeTableData16_23 = new Node[]{
      new Node(0, 0, 1, 0b1),
      new Node(0, 1, 4, 0b0101),
      new Node(0, 2, 6, 0b001110),
      new Node(0, 3, 8, 0b00101100),
      new Node(0, 4, 9, 0b001001010),
      new Node(0, 5, 9, 0b000111111),
      new Node(0, 6, 10, 0b0001101110),
      new Node(0, 7, 10, 0b0001011101),
      new Node(0, 8, 11, 0b00010101100),
      new Node(0, 9, 11, 0b00010010101),
      new Node(0, 10, 11, 0b00010001010),
      new Node(0, 11, 12, 0b000011110010),
      new Node(0, 12, 12, 0b000011100001),
      new Node(0, 13, 12, 0b000011000011),
      new Node(0, 14, 13, 0b0000101111000),
      new Node(0, 15, 9, 0b000010001),
      new Node(1, 0, 3, 0b011),
      new Node(1, 1, 4, 0b0100),
      new Node(1, 2, 6, 0b001100),
      new Node(1, 3, 7, 0b0010100),
      new Node(1, 4, 8, 0b00100011),
      new Node(1, 5, 9, 0b000111110),
      new Node(1, 6, 9, 0b000110101),
      new Node(1, 7, 9, 0b000101111),
      new Node(1, 8, 10, 0b0001010011),
      new Node(1, 9, 10, 0b0001001011),
      new Node(1, 10, 10, 0b0001000100),
      new Node(1, 11, 11, 0b00001110111),
      new Node(1, 12, 12, 0b000011001001),
      new Node(1, 13, 11, 0b00001101011),
      new Node(1, 14, 12, 0b000011001111),
      new Node(1, 15, 8, 0b00001001),
      new Node(2, 0, 6, 0b001111),
      new Node(2, 1, 6, 0b001101),
      new Node(2, 2, 7, 0b0010111),
      new Node(2, 3, 8, 0b00100110),
      new Node(2, 4, 9, 0b001000011),
      new Node(2, 5, 9, 0b000111010),
      new Node(2, 6, 10, 0b0001100111),
      new Node(2, 7, 10, 0b0001011010),
      new Node(2, 8, 11, 0b00010100001),
      new Node(2, 9, 10, 0b0001001000),
      new Node(2, 10, 11, 0b00001111111),
      new Node(2, 11, 11, 0b00001110101),
      new Node(2, 12, 11, 0b00001101110),
      new Node(2, 13, 12, 0b000011010001),
      new Node(2, 14, 12, 0b000011001110),
      new Node(2, 15, 9, 0b000010000),
      new Node(3, 0, 8, 0b00101101),
      new Node(3, 1, 7, 0b0010101),
      new Node(3, 2, 8, 0b00100111),
      new Node(3, 3, 9, 0b001000101),
      new Node(3, 4, 9, 0b001000000),
      new Node(3, 5, 10, 0b0001110010),
      new Node(3, 6, 10, 0b0001100011),
      new Node(3, 7, 10, 0b0001010111),
      new Node(3, 8, 11, 0b00010011110),
      new Node(3, 9, 11, 0b00010001100),
      new Node(3, 10, 12, 0b000011111100),
      new Node(3, 11, 12, 0b000011010100),
      new Node(3, 12, 12, 0b000011000111),
      new Node(3, 13, 13, 0b0000110000011),
      new Node(3, 14, 13, 0b0000101101101),
      new Node(3, 15, 10, 0b0000011010),
      new Node(4, 0, 9, 0b001001011),
      new Node(4, 1, 8, 0b00100100),
      new Node(4, 2, 9, 0b001000100),
      new Node(4, 3, 9, 0b001000001),
      new Node(4, 4, 10, 0b0001110011),
      new Node(4, 5, 10, 0b0001100101),
      new Node(4, 6, 11, 0b00010110011),
      new Node(4, 7, 11, 0b00010100100),
      new Node(4, 8, 11, 0b00010011011),
      new Node(4, 9, 12, 0b000100001000),
      new Node(4, 10, 12, 0b000011110110),
      new Node(4, 11, 12, 0b000011100010),
      new Node(4, 12, 13, 0b0000110001011),
      new Node(4, 13, 13, 0b0000101111110),
      new Node(4, 14, 13, 0b0000101101010),
      new Node(4, 15, 9, 0b000001001),
      new Node(5, 0, 9, 0b001000010),
      new Node(5, 1, 8, 0b00011110),
      new Node(5, 2, 9, 0b000111011),
      new Node(5, 3, 9, 0b000111000),
      new Node(5, 4, 10, 0b0001100110),
      new Node(5, 5, 11, 0b00010111001),
      new Node(5, 6, 11, 0b00010101101),
      new Node(5, 7, 12, 0b000100001001),
      new Node(5, 8, 11, 0b00010001110),
      new Node(5, 9, 12, 0b000011111101),
      new Node(5, 10, 12, 0b000011101000),
      new Node(5, 11, 13, 0b0000110010000),
      new Node(5, 12, 13, 0b0000110000100),
      new Node(5, 13, 13, 0b0000101111010),
      new Node(5, 14, 14, 0b00000110111101),
      new Node(5, 15, 10, 0b0000010000),
      new Node(6, 0, 10, 0b0001101111),
      new Node(6, 1, 9, 0b000110110),
      new Node(6, 2, 9, 0b000110100),
      new Node(6, 3, 10, 0b0001100100),
      new Node(6, 4, 11, 0b00010111000),
      new Node(6, 5, 11, 0b00010110010),
      new Node(6, 6, 11, 0b00010100000),
      new Node(6, 7, 11, 0b00010000101),
      new Node(6, 8, 12, 0b000100000001),
      new Node(6, 9, 12, 0b000011110100),
      new Node(6, 10, 12, 0b000011100100),
      new Node(6, 11, 12, 0b000011011001),
      new Node(6, 12, 13, 0b0000110000001),
      new Node(6, 13, 13, 0b0000101101110),
      new Node(6, 14, 14, 0b00001011001011),
      new Node(6, 15, 10, 0b0000001010),
      new Node(7, 0, 10, 0b0001100010),
      new Node(7, 1, 9, 0b000110000),
      new Node(7, 2, 10, 0b0001011011),
      new Node(7, 3, 10, 0b0001011000),
      new Node(7, 4, 11, 0b00010100101),
      new Node(7, 5, 11, 0b00010011101),
      new Node(7, 6, 11, 0b00010010100),
      new Node(7, 7, 12, 0b000100000101),
      new Node(7, 8, 12, 0b000011111000),
      new Node(7, 9, 13, 0b0000110010111),
      new Node(7, 10, 13, 0b0000110001101),
      new Node(7, 11, 13, 0b0000101110100),
      new Node(7, 12, 13, 0b0000101111100),
      new Node(7, 13, 15, 0b000001101111001),
      new Node(7, 14, 15, 0b000001101110100),
      new Node(7, 15, 10, 0b0000001000),
      new Node(8, 0, 10, 0b0001010101),
      new Node(8, 1, 10, 0b0001010100),
      new Node(8, 2, 10, 0b0001010001),
      new Node(8, 3, 11, 0b00010011111),
      new Node(8, 4, 11, 0b00010011100),
      new Node(8, 5, 11, 0b00010001111),
      new Node(8, 6, 12, 0b000100000100),
      new Node(8, 7, 12, 0b000011111001),
      new Node(8, 8, 13, 0b0000110101011),
      new Node(8, 9, 13, 0b0000110010001),
      new Node(8, 10, 13, 0b0000110001000),
      new Node(8, 11, 13, 0b0000101111111),
      new Node(8, 12, 14, 0b00001011010111),
      new Node(8, 13, 14, 0b00001011001001),
      new Node(8, 14, 14, 0b00001011000100),
      new Node(8, 15, 10, 0b0000000111),
      new Node(9, 0, 11, 0b00010011010),
      new Node(9, 1, 10, 0b0001001100),
      new Node(9, 2, 10, 0b0001001001),
      new Node(9, 3, 11, 0b00010001101),
      new Node(9, 4, 11, 0b00010000011),
      new Node(9, 5, 12, 0b000100000000),
      new Node(9, 6, 12, 0b000011110101),
      new Node(9, 7, 13, 0b0000110101010),
      new Node(9, 8, 13, 0b0000110010110),
      new Node(9, 9, 13, 0b0000110001010),
      new Node(9, 10, 13, 0b0000110000000),
      new Node(9, 11, 14, 0b00001011011111),
      new Node(9, 12, 13, 0b0000101100111),
      new Node(9, 13, 14, 0b00001011000110),
      new Node(9, 14, 13, 0b0000101100000),
      new Node(9, 15, 11, 0b00000001011),
      new Node(10, 0, 11, 0b00010001011),
      new Node(10, 1, 11, 0b00010000001),
      new Node(10, 2, 10, 0b0001000011),
      new Node(10, 3, 11, 0b00001111101),
      new Node(10, 4, 12, 0b000011110111),
      new Node(10, 5, 12, 0b000011101001),
      new Node(10, 6, 12, 0b000011100101),
      new Node(10, 7, 12, 0b000011011011),
      new Node(10, 8, 13, 0b0000110001001),
      new Node(10, 9, 14, 0b00001011100111),
      new Node(10, 10, 14, 0b00001011100001),
      new Node(10, 11, 14, 0b00001011010000),
      new Node(10, 12, 15, 0b000001101110101),
      new Node(10, 13, 15, 0b000001101110010),
      new Node(10, 14, 14, 0b00000110110111),
      new Node(10, 15, 10, 0b0000000100),
      new Node(11, 0, 12, 0b000011110011),
      new Node(11, 1, 11, 0b00001111000),
      new Node(11, 2, 11, 0b00001110110),
      new Node(11, 3, 11, 0b00001110011),
      new Node(11, 4, 12, 0b000011100011),
      new Node(11, 5, 12, 0b000011011111),
      new Node(11, 6, 13, 0b0000110001100),
      new Node(11, 7, 14, 0b00001011101010),
      new Node(11, 8, 14, 0b00001011100110),
      new Node(11, 9, 14, 0b00001011100000),
      new Node(11, 10, 14, 0b00001011010001),
      new Node(11, 11, 14, 0b00001011001000),
      new Node(11, 12, 14, 0b00001011000010),
      new Node(11, 13, 13, 0b0000011011111),
      new Node(11, 14, 14, 0b00000110110100),
      new Node(11, 15, 11, 0b00000000110),
      new Node(12, 0, 12, 0b000011001010),
      new Node(12, 1, 12, 0b000011100000),
      new Node(12, 2, 12, 0b000011011110),
      new Node(12, 3, 12, 0b000011011010),
      new Node(12, 4, 12, 0b000011011000),
      new Node(12, 5, 13, 0b0000110000101),
      new Node(12, 6, 13, 0b0000110000010),
      new Node(12, 7, 13, 0b0000101111101),
      new Node(12, 8, 13, 0b0000101101100),
      new Node(12, 9, 15, 0b000001101111000),
      new Node(12, 10, 14, 0b00000110111011),
      new Node(12, 11, 14, 0b00001011000011),
      new Node(12, 12, 14, 0b00000110111000),
      new Node(12, 13, 14, 0b00000110110101),
      new Node(12, 14, 16, 0b0000011011000000),
      new Node(12, 15, 11, 0b00000000100),
      new Node(13, 0, 14, 0b00001011101011),
      new Node(13, 1, 12, 0b000011010011),
      new Node(13, 2, 12, 0b000011010010),
      new Node(13, 3, 12, 0b000011010000),
      new Node(13, 4, 13, 0b0000101110010),
      new Node(13, 5, 13, 0b0000101111011),
      new Node(13, 6, 14, 0b00001011011110),
      new Node(13, 7, 14, 0b00001011010011),
      new Node(13, 8, 14, 0b00001011001010),
      new Node(13, 9, 16, 0b0000011011000111),
      new Node(13, 10, 15, 0b000001101110011),
      new Node(13, 11, 15, 0b000001101101101),
      new Node(13, 12, 15, 0b000001101101100),
      new Node(13, 13, 17, 0b00000110110000011),
      new Node(13, 14, 15, 0b000001101100001),
      new Node(13, 15, 11, 0b00000000010),
      new Node(14, 0, 13, 0b0000101111001),
      new Node(14, 1, 13, 0b0000101110001),
      new Node(14, 2, 11, 0b00001100110),
      new Node(14, 3, 12, 0b000010111011),
      new Node(14, 4, 14, 0b00001011010110),
      new Node(14, 5, 14, 0b00001011010010),
      new Node(14, 6, 13, 0b0000101100110),
      new Node(14, 7, 14, 0b00001011000111),
      new Node(14, 8, 14, 0b00001011000101),
      new Node(14, 9, 15, 0b000001101100010),
      new Node(14, 10, 16, 0b0000011011000110),
      new Node(14, 11, 15, 0b000001101100111),
      new Node(14, 12, 17, 0b00000110110000010),
      new Node(14, 13, 15, 0b000001101100110),
      new Node(14, 14, 14, 0b00000110110010),
      new Node(14, 15, 11, 0b00000000000),
      new Node(15, 0, 9, 0b000001100),
      new Node(15, 1, 8, 0b00001010),
      new Node(15, 2, 8, 0b00000111),
      new Node(15, 3, 9, 0b000001011),
      new Node(15, 4, 9, 0b000001010),
      new Node(15, 5, 10, 0b0000010001),
      new Node(15, 6, 10, 0b0000001011),
      new Node(15, 7, 10, 0b0000001001),
      new Node(15, 8, 11, 0b00000001101),
      new Node(15, 9, 11, 0b00000001100),
      new Node(15, 10, 11, 0b00000001010),
      new Node(15, 11, 11, 0b00000000111),
      new Node(15, 12, 11, 0b00000000101),
      new Node(15, 13, 11, 0b00000000011),
      new Node(15, 14, 11, 0b00000000001),
      new Node(15, 15, 8, 0b00000011)
    };

    // Huffman code table 16
    tables[16] = new CodeTable(1, codeTableData16_23);

    // Huffman code table 17
    tables[17] = new CodeTable(2, codeTableData16_23);

    // Huffman code table 18
    tables[18] = new CodeTable(3, codeTableData16_23);

    // Huffman code table 19
    tables[19] = new CodeTable(4, codeTableData16_23);

    // Huffman code table 20
    tables[20] = new CodeTable(6, codeTableData16_23);

    // Huffman code table 21
    tables[21] = new CodeTable(8, codeTableData16_23);

    // Huffman code table 22
    tables[22] = new CodeTable(10, codeTableData16_23);

    // Huffman code table 23
    tables[23] = new CodeTable(13, codeTableData16_23);

    // data for Huffman code tables 24-31
    var codeTableData24_31 = new Node[]{
      new Node(0, 0, 4, 0b1111),
      new Node(0, 1, 4, 0b1101),
      new Node(0, 2, 6, 0b101110),
      new Node(0, 3, 7, 0b1010000),
      new Node(0, 4, 8, 0b10010010),
      new Node(0, 5, 9, 0b100000110),
      new Node(0, 6, 9, 0b011111000),
      new Node(0, 7, 10, 0b0110110010),
      new Node(0, 8, 10, 0b0110101010),
      new Node(0, 9, 11, 0b01010011101),
      new Node(0, 10, 11, 0b01010001101),
      new Node(0, 11, 11, 0b01010001001),
      new Node(0, 12, 11, 0b01001101101),
      new Node(0, 13, 11, 0b01000000101),
      new Node(0, 14, 12, 0b010000001000),
      new Node(0, 15, 9, 0b001011000),
      new Node(1, 0, 4, 0b1110),
      new Node(1, 1, 4, 0b1100),
      new Node(1, 2, 5, 0b10101),
      new Node(1, 3, 6, 0b100110),
      new Node(1, 4, 7, 0b1000111),
      new Node(1, 5, 8, 0b10000010),
      new Node(1, 6, 8, 0b01111010),
      new Node(1, 7, 9, 0b011011000),
      new Node(1, 8, 9, 0b011010001),
      new Node(1, 9, 9, 0b011000110),
      new Node(1, 10, 10, 0b0101000111),
      new Node(1, 11, 10, 0b0101011001),
      new Node(1, 12, 10, 0b0100111111),
      new Node(1, 13, 10, 0b0100101001),
      new Node(1, 14, 10, 0b0100010111),
      new Node(1, 15, 8, 0b00101010),
      new Node(2, 0, 6, 0b101111),
      new Node(2, 1, 5, 0b10110),
      new Node(2, 2, 6, 0b101001),
      new Node(2, 3, 7, 0b1001010),
      new Node(2, 4, 7, 0b1000100),
      new Node(2, 5, 8, 0b10000000),
      new Node(2, 6, 8, 0b01111000),
      new Node(2, 7, 9, 0b011011101),
      new Node(2, 8, 9, 0b011001111),
      new Node(2, 9, 9, 0b011000010),
      new Node(2, 10, 9, 0b010110110),
      new Node(2, 11, 10, 0b0101010100),
      new Node(2, 12, 10, 0b0100111011),
      new Node(2, 13, 10, 0b0100100111),
      new Node(2, 14, 11, 0b01000011101),
      new Node(2, 15, 7, 0b0010010),
      new Node(3, 0, 7, 0b1010001),
      new Node(3, 1, 6, 0b100111),
      new Node(3, 2, 7, 0b1001011),
      new Node(3, 3, 7, 0b1000110),
      new Node(3, 4, 8, 0b10000110),
      new Node(3, 5, 8, 0b01111101),
      new Node(3, 6, 8, 0b01110100),
      new Node(3, 7, 9, 0b011011100),
      new Node(3, 8, 9, 0b011001100),
      new Node(3, 9, 9, 0b010111110),
      new Node(3, 10, 9, 0b010110010),
      new Node(3, 11, 10, 0b0101000101),
      new Node(3, 12, 10, 0b0100110111),
      new Node(3, 13, 10, 0b0100100101),
      new Node(3, 14, 10, 0b0100001111),
      new Node(3, 15, 7, 0b0010000),
      new Node(4, 0, 8, 0b10010011),
      new Node(4, 1, 7, 0b1001000),
      new Node(4, 2, 7, 0b1000101),
      new Node(4, 3, 8, 0b10000111),
      new Node(4, 4, 8, 0b01111111),
      new Node(4, 5, 8, 0b01110110),
      new Node(4, 6, 8, 0b01110000),
      new Node(4, 7, 9, 0b011010010),
      new Node(4, 8, 9, 0b011001000),
      new Node(4, 9, 9, 0b010111100),
      new Node(4, 10, 10, 0b0101100000),
      new Node(4, 11, 10, 0b0101000011),
      new Node(4, 12, 10, 0b0100110010),
      new Node(4, 13, 10, 0b0100011101),
      new Node(4, 14, 11, 0b01000011100),
      new Node(4, 15, 7, 0b0001110),
      new Node(5, 0, 9, 0b100000111),
      new Node(5, 1, 7, 0b1000010),
      new Node(5, 2, 8, 0b10000001),
      new Node(5, 3, 8, 0b01111110),
      new Node(5, 4, 8, 0b01110111),
      new Node(5, 5, 8, 0b01110010),
      new Node(5, 6, 9, 0b011010110),
      new Node(5, 7, 9, 0b011001010),
      new Node(5, 8, 9, 0b011000000),
      new Node(5, 9, 9, 0b010110100),
      new Node(5, 10, 10, 0b0101010101),
      new Node(5, 11, 10, 0b0100111101),
      new Node(5, 12, 10, 0b0100101101),
      new Node(5, 13, 10, 0b0100011001),
      new Node(5, 14, 10, 0b0100000110),
      new Node(5, 15, 7, 0b0001100),
      new Node(6, 0, 9, 0b011111001),
      new Node(6, 1, 8, 0b01111011),
      new Node(6, 2, 8, 0b01111001),
      new Node(6, 3, 8, 0b01110101),
      new Node(6, 4, 8, 0b01110001),
      new Node(6, 5, 9, 0b011010111),
      new Node(6, 6, 9, 0b011001110),
      new Node(6, 7, 9, 0b011000011),
      new Node(6, 8, 9, 0b010111001),
      new Node(6, 9, 10, 0b0101011011),
      new Node(6, 10, 10, 0b0101001010),
      new Node(6, 11, 10, 0b0100110100),
      new Node(6, 12, 10, 0b0100100011),
      new Node(6, 13, 10, 0b0100010000),
      new Node(6, 14, 11, 0b01000001000),
      new Node(6, 15, 7, 0b0001010),
      new Node(7, 0, 10, 0b0110110011),
      new Node(7, 1, 8, 0b01110011),
      new Node(7, 2, 8, 0b01101111),
      new Node(7, 3, 8, 0b01101101),
      new Node(7, 4, 9, 0b011010011),
      new Node(7, 5, 9, 0b011001011),
      new Node(7, 6, 9, 0b011000100),
      new Node(7, 7, 9, 0b010111011),
      new Node(7, 8, 10, 0b0101100001),
      new Node(7, 9, 10, 0b0101001100),
      new Node(7, 10, 10, 0b0100111001),
      new Node(7, 11, 10, 0b0100101010),
      new Node(7, 12, 10, 0b0100011011),
      new Node(7, 13, 11, 0b01000010011),
      new Node(7, 14, 11, 0b00101111101),
      new Node(7, 15, 8, 0b00010001),
      new Node(8, 0, 10, 0b0110101011),
      new Node(8, 1, 9, 0b011010100),
      new Node(8, 2, 9, 0b011010000),
      new Node(8, 3, 9, 0b011001101),
      new Node(8, 4, 9, 0b011001001),
      new Node(8, 5, 9, 0b011000001),
      new Node(8, 6, 9, 0b010111010),
      new Node(8, 7, 9, 0b010110001),
      new Node(8, 8, 9, 0b010101001),
      new Node(8, 9, 10, 0b0101000000),
      new Node(8, 10, 10, 0b0100101111),
      new Node(8, 11, 10, 0b0100011110),
      new Node(8, 12, 10, 0b0100001100),
      new Node(8, 13, 11, 0b01000000010),
      new Node(8, 14, 11, 0b00101111001),
      new Node(8, 15, 8, 0b00010000),
      new Node(9, 0, 10, 0b0101001111),
      new Node(9, 1, 9, 0b011000111),
      new Node(9, 2, 9, 0b011000101),
      new Node(9, 3, 9, 0b010111111),
      new Node(9, 4, 9, 0b010111101),
      new Node(9, 5, 9, 0b010110101),
      new Node(9, 6, 9, 0b010101110),
      new Node(9, 7, 10, 0b0101001101),
      new Node(9, 8, 10, 0b0101000001),
      new Node(9, 9, 10, 0b0100110001),
      new Node(9, 10, 10, 0b0100100001),
      new Node(9, 11, 10, 0b0100010011),
      new Node(9, 12, 11, 0b01000001001),
      new Node(9, 13, 11, 0b00101111011),
      new Node(9, 14, 11, 0b00101110011),
      new Node(9, 15, 8, 0b00001011),
      new Node(10, 0, 11, 0b01010011100),
      new Node(10, 1, 9, 0b010111000),
      new Node(10, 2, 9, 0b010110111),
      new Node(10, 3, 9, 0b010110011),
      new Node(10, 4, 9, 0b010101111),
      new Node(10, 5, 10, 0b0101011000),
      new Node(10, 6, 10, 0b0101001011),
      new Node(10, 7, 10, 0b0100111010),
      new Node(10, 8, 10, 0b0100110000),
      new Node(10, 9, 10, 0b0100100010),
      new Node(10, 10, 10, 0b0100010101),
      new Node(10, 11, 11, 0b01000010010),
      new Node(10, 12, 11, 0b00101111111),
      new Node(10, 13, 11, 0b00101110101),
      new Node(10, 14, 11, 0b00101101110),
      new Node(10, 15, 8, 0b00001010),
      new Node(11, 0, 11, 0b01010001100),
      new Node(11, 1, 10, 0b0101011010),
      new Node(11, 2, 9, 0b010101011),
      new Node(11, 3, 9, 0b010101000),
      new Node(11, 4, 9, 0b010100100),
      new Node(11, 5, 10, 0b0100111110),
      new Node(11, 6, 10, 0b0100110101),
      new Node(11, 7, 10, 0b0100101011),
      new Node(11, 8, 10, 0b0100011111),
      new Node(11, 9, 10, 0b0100010100),
      new Node(11, 10, 10, 0b0100000111),
      new Node(11, 11, 11, 0b01000000001),
      new Node(11, 12, 11, 0b00101110111),
      new Node(11, 13, 11, 0b00101110000),
      new Node(11, 14, 11, 0b00101101010),
      new Node(11, 15, 8, 0b00000110),
      new Node(12, 0, 11, 0b01010001000),
      new Node(12, 1, 10, 0b0101000010),
      new Node(12, 2, 10, 0b0100111100),
      new Node(12, 3, 10, 0b0100111000),
      new Node(12, 4, 10, 0b0100110011),
      new Node(12, 5, 10, 0b0100101110),
      new Node(12, 6, 10, 0b0100100100),
      new Node(12, 7, 10, 0b0100011100),
      new Node(12, 8, 10, 0b0100001101),
      new Node(12, 9, 10, 0b0100000101),
      new Node(12, 10, 11, 0b01000000000),
      new Node(12, 11, 11, 0b00101111000),
      new Node(12, 12, 11, 0b00101110010),
      new Node(12, 13, 11, 0b00101101100),
      new Node(12, 14, 11, 0b00101100111),
      new Node(12, 15, 8, 0b00000100),
      new Node(13, 0, 11, 0b01001101100),
      new Node(13, 1, 10, 0b0100101100),
      new Node(13, 2, 10, 0b0100101000),
      new Node(13, 3, 10, 0b0100100110),
      new Node(13, 4, 10, 0b0100100000),
      new Node(13, 5, 10, 0b0100011010),
      new Node(13, 6, 10, 0b0100010001),
      new Node(13, 7, 10, 0b0100001010),
      new Node(13, 8, 11, 0b01000000011),
      new Node(13, 9, 11, 0b00101111100),
      new Node(13, 10, 11, 0b00101110110),
      new Node(13, 11, 11, 0b00101110001),
      new Node(13, 12, 11, 0b00101101101),
      new Node(13, 13, 11, 0b00101101001),
      new Node(13, 14, 11, 0b00101100101),
      new Node(13, 15, 8, 0b00000010),
      new Node(14, 0, 12, 0b010000001001),
      new Node(14, 1, 10, 0b0100011000),
      new Node(14, 2, 10, 0b0100010110),
      new Node(14, 3, 10, 0b0100010010),
      new Node(14, 4, 10, 0b0100001011),
      new Node(14, 5, 10, 0b0100001000),
      new Node(14, 6, 10, 0b0100000011),
      new Node(14, 7, 11, 0b00101111110),
      new Node(14, 8, 11, 0b00101111010),
      new Node(14, 9, 11, 0b00101110100),
      new Node(14, 10, 11, 0b00101101111),
      new Node(14, 11, 11, 0b00101101011),
      new Node(14, 12, 11, 0b00101101000),
      new Node(14, 13, 11, 0b00101100110),
      new Node(14, 14, 11, 0b00101100100),
      new Node(14, 15, 8, 0b00000000),
      new Node(15, 0, 8, 0b00101011),
      new Node(15, 1, 7, 0b0010100),
      new Node(15, 2, 7, 0b0010011),
      new Node(15, 3, 7, 0b0010001),
      new Node(15, 4, 7, 0b0001111),
      new Node(15, 5, 7, 0b0001101),
      new Node(15, 6, 7, 0b0001011),
      new Node(15, 7, 7, 0b0001001),
      new Node(15, 8, 7, 0b0000111),
      new Node(15, 9, 7, 0b0000110),
      new Node(15, 10, 7, 0b0000100),
      new Node(15, 11, 8, 0b00000111),
      new Node(15, 12, 8, 0b00000101),
      new Node(15, 13, 8, 0b00000011),
      new Node(15, 14, 8, 0b00000001),
      new Node(15, 15, 4, 0b0011)
    };

    // Huffman code table 24
    tables[24] = new CodeTable(4, codeTableData24_31);

    // Huffman code table 25
    tables[25] = new CodeTable(5, codeTableData24_31);

    // Huffman code table 26
    tables[26] = new CodeTable(6, codeTableData24_31);

    // Huffman code table 27
    tables[27] = new CodeTable(7, codeTableData24_31);

    // Huffman code table 28
    tables[28] = new CodeTable(8, codeTableData24_31);

    // Huffman code table 29
    tables[29] = new CodeTable(9, codeTableData24_31);

    // Huffman code table 30
    tables[30] = new CodeTable(11, codeTableData24_31);

    // Huffman code table 31
    tables[31] = new CodeTable(13, codeTableData24_31);
  }

  static Node decode(CodeTable table, BitReader bitReader) {
    if (table.getLevels() == 0) {
      return Node.EMPTY;
    }

    var nextBit = bitReader.getNextBit();
    var hcod = 0;
    var level = 1;
    while (nextBit != BitReader.END_OF_DATA && level <= MAX_LEVEL) {
      hcod = hcod << 1 | nextBit;

      var node = table.getNode(level, hcod);
      if (node != null) {
        return node;
      }

      level++;
      nextBit = bitReader.getNextBit();
    }

    // the specified tree doesn't contain a matching node for the provided bit reader at its position
    return null;
  }

  static CodeTable getTable(int tableIndex) {
    return tables[tableIndex];
  }

  record Node(int x, int y, int hlen, int hcod) {
    /**
     * An empty node that provides x = 0 and y = 0 (usually only used for code tree 0).
     */
    static final Node EMPTY = new Node(0, 0, 0, 0b0);
  }

  static class CodeTable {

    private final Map<Integer, List<Node>> nodesByLevel = new HashMap<>();

    private final int levels;

    int linbits;

    CodeTable(Node... entries) {
      var maxLevel = 0;
      for (var value : entries) {
        var level = value.hlen;
        if (!this.nodesByLevel.containsKey(level)) {
          this.nodesByLevel.put(level, new ArrayList<>());
        }

        this.nodesByLevel.get(level).add(value);
        maxLevel = Math.max(maxLevel, value.hlen);
      }

      this.levels = maxLevel;
    }

    CodeTable(int linbits, Node... entries) {
      this(entries);
      this.linbits = linbits;
    }

    public int getLevels() {
      return this.levels;
    }

    Collection<List<Node>> getNodes(){
      return nodesByLevel.values();
    }
    public Node getNode(int level, int huffmanCode) {
      if (level < 0 || level > this.levels || !this.nodesByLevel.containsKey(level)) {
        return null;
      }

      var node = this.nodesByLevel.get(level).stream().filter(x -> x.hcod == huffmanCode).findFirst();
      return node.orElse(null);
    }
  }
}
